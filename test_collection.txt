============================= test session starts =============================
platform win32 -- Python 3.13.5, pytest-8.4.2, pluggy-1.6.0 -- C:\Python313\python.exe
cachedir: .pytest_cache
rootdir: C:\Projects\XBS\PurposePath\PurposePath_Api\pp_ai\coaching
configfile: pyproject.toml
plugins: anyio-4.9.0, Faker-24.14.1, asyncio-1.2.0, cov-7.0.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 567 items / 5 errors

<Dir coaching>
  <Package tests>
    <Package unit>
      <Dir application>
        <Dir analysis>
          <Module test_operations_ai_service.py>
            Unit tests for OperationsAIService (Issue #63).
            
            Tests all three service methods with mocked LLM service:
            - analyze_strategic_alignment
            - suggest_prioritization
            - optimize_scheduling
            <Class TestAnalyzeStrategicAlignment>
              Test suite for analyze_strategic_alignment method.
              <Coroutine test_successful_alignment_analysis>
                Test successful strategic alignment analysis.
              <Coroutine test_alignment_with_no_actions_raises_error>
                Test that empty actions list raises ValueError.
              <Coroutine test_alignment_with_no_goals_raises_error>
                Test that empty goals list raises ValueError.
              <Coroutine test_alignment_with_missing_foundation_raises_error>
                Test that missing vision/purpose raises ValueError.
              <Coroutine test_alignment_uses_correct_temperature>
                Test that alignment analysis uses temperature 0.6.
              <Coroutine test_alignment_handles_malformed_json>
                Test fallback when LLM returns malformed JSON.
            <Class TestSuggestPrioritization>
              Test suite for suggest_prioritization method.
              <Coroutine test_successful_prioritization_suggestions>
                Test successful prioritization suggestions.
              <Coroutine test_prioritization_with_no_actions_raises_error>
                Test that empty actions list raises ValueError.
              <Coroutine test_prioritization_uses_correct_temperature>
                Test that prioritization uses temperature 0.5.
              <Coroutine test_prioritization_handles_malformed_json>
                Test fallback when LLM returns malformed JSON.
            <Class TestOptimizeScheduling>
              Test suite for optimize_scheduling method.
              <Coroutine test_successful_scheduling_optimization>
                Test successful scheduling optimization.
              <Coroutine test_scheduling_with_no_actions_raises_error>
                Test that empty actions list raises ValueError.
              <Coroutine test_scheduling_with_no_capacity_raises_error>
                Test that missing team capacity raises ValueError.
              <Coroutine test_scheduling_uses_correct_temperature>
                Test that scheduling uses temperature 0.4.
              <Coroutine test_scheduling_handles_malformed_json>
                Test fallback when LLM returns malformed JSON.
            <Class TestSuggestRootCauseMethods>
              Test suite for suggest_root_cause_methods method.
              <Coroutine test_successful_root_cause_suggestions>
                Test successful root cause method suggestions.
              <Coroutine test_root_cause_with_missing_title_raises_error>
                Test that missing issue title raises ValueError.
              <Coroutine test_root_cause_uses_correct_temperature>
                Test that root cause analysis uses temperature 0.6.
              <Coroutine test_root_cause_handles_malformed_json>
                Test fallback when LLM returns malformed JSON.
            <Class TestGenerateActionPlan>
              Test suite for generate_action_plan method.
              <Coroutine test_successful_action_plan_generation>
                Test successful action plan generation.
              <Coroutine test_action_plan_with_missing_title_raises_error>
                Test that missing issue title raises ValueError.
              <Coroutine test_action_plan_uses_correct_temperature>
                Test that action plan generation uses temperature 0.5.
              <Coroutine test_action_plan_handles_malformed_json>
                Test fallback when LLM returns malformed JSON.
      <Package core>
        <Module test_constants.py>
          Unit tests for core constants.
          
          Tests enums and business rule constants to ensure completeness
          and correctness.
          <Class TestCoachingTopic>
            Test suite for CoachingTopic enum.
            <Function test_coaching_topic_has_all_expected_values>
              Test that CoachingTopic enum has all expected coaching topics.
            <Function test_coaching_topic_count>
              Test that CoachingTopic enum has the expected number of values.
            <Function test_coaching_topic_values_are_strings>
              Test that all CoachingTopic values are strings.
            <Function test_coaching_topic_can_iterate>
              Test that we can iterate over CoachingTopic values.
          <Class TestConversationStatus>
            Test suite for ConversationStatus enum.
            <Function test_conversation_status_has_all_expected_values>
              Test that ConversationStatus enum has all expected statuses.
            <Function test_conversation_status_count>
              Test that ConversationStatus enum has the expected number of values.
            <Function test_conversation_status_values_are_strings>
              Test that all ConversationStatus values are strings.
          <Class TestConversationPhase>
            Test suite for ConversationPhase enum.
            <Function test_conversation_phase_has_all_expected_values>
              Test that ConversationPhase enum has all expected phases.
            <Function test_conversation_phase_count>
              Test that ConversationPhase enum has the expected number of values.
            <Function test_conversation_phase_values_are_strings>
              Test that all ConversationPhase values are strings.
          <Class TestMessageRole>
            Test suite for MessageRole enum.
            <Function test_message_role_has_all_expected_values>
              Test that MessageRole enum has all expected roles.
            <Function test_message_role_count>
              Test that MessageRole enum has the expected number of values.
            <Function test_message_role_values_are_strings>
              Test that all MessageRole values are strings.
          <Class TestAnalysisType>
            Test suite for AnalysisType enum.
            <Function test_analysis_type_has_all_expected_values>
              Test that AnalysisType enum has all expected analysis types.
            <Function test_analysis_type_count>
              Test that AnalysisType enum has the expected number of values.
            <Function test_analysis_type_values_are_strings>
              Test that all AnalysisType values are strings.
          <Class TestPhaseProgressWeights>
            Test suite for PHASE_PROGRESS_WEIGHTS constant.
            <Function test_phase_progress_weights_has_all_phases>
              Test that PHASE_PROGRESS_WEIGHTS includes all conversation phases.
            <Function test_phase_progress_weights_has_correct_count>
              Test that PHASE_PROGRESS_WEIGHTS has weights for all phases.
            <Function test_phase_progress_weights_are_floats>
              Test that all progress weights are floats.
            <Function test_phase_progress_weights_are_in_valid_range>
              Test that all progress weights are between 0 and 1.
            <Function test_phase_progress_weights_are_monotonically_increasing>
              Test that progress weights increase through phases.
            <Function test_completion_phase_weight_is_one>
              Test that completion phase has weight of 1.0.
          <Class TestPhaseRequirements>
            Test suite for PHASE_REQUIREMENTS constant.
            <Function test_phase_requirements_has_expected_phases>
              Test that PHASE_REQUIREMENTS includes the expected phases.
            <Function test_phase_requirements_count>
              Test that PHASE_REQUIREMENTS has the expected number of entries.
            <Function test_phase_requirements_are_dicts>
              Test that all phase requirements are dictionaries.
            <Function test_exploration_phase_requirements>
              Test exploration phase requirements.
            <Function test_deepening_phase_requirements>
              Test deepening phase requirements.
            <Function test_synthesis_phase_requirements>
              Test synthesis phase requirements.
            <Function test_validation_phase_requirements>
              Test validation phase requirements.
            <Function test_completion_phase_requirements>
              Test completion phase requirements.
          <Class TestDefaultLLMModels>
            Test suite for DEFAULT_LLM_MODELS constant.
            <Function test_default_llm_models_has_all_topics>
              Test that DEFAULT_LLM_MODELS includes all coaching topics.
            <Function test_default_llm_models_count>
              Test that DEFAULT_LLM_MODELS has models for all topics.
            <Function test_default_llm_models_are_strings>
              Test that all LLM model identifiers are strings.
            <Function test_default_llm_models_are_valid_bedrock_ids>
              Test that all LLM model identifiers follow Bedrock format.
          <Class TestBusinessRulesConsistency>
            Test suite for business rules consistency.
            <Function test_phase_weights_and_requirements_alignment>
              Test that phases with requirements have progress weights.
            <Function test_all_enums_are_complete>
              Test that all enums have at least one value.
        <Module test_llm_interactions.py>
          Unit tests for LLM Interactions Registry.
          <Class TestLLMInteraction>
            Tests for LLMInteraction dataclass.
            <Function test_validate_template_parameters_all_required_present>
              Test validation passes when all required parameters present.
            <Function test_validate_template_parameters_missing_required>
              Test validation fails when required parameter missing.
            <Function test_validate_template_parameters_unsupported_used>
              Test validation fails when unsupported parameter used.
            <Function test_validate_template_parameters_optional_allowed>
              Test validation passes with optional parameters.
            <Function test_get_parameter_schema>
              Test parameter schema generation.
          <Class TestInteractionRegistry>
            Tests for interaction registry functions.
            <Function test_get_interaction_exists>
              Test retrieving existing interaction from registry.
            <Function test_get_interaction_not_found>
              Test helpful error when interaction not in registry.
            <Function test_list_interactions_all>
              Test listing all interactions.
            <Function test_list_interactions_by_category>
              Test filtering interactions by category.
            <Function test_validate_parameters_all_required_provided>
              Test parameter validation with all required present.
            <Function test_validate_parameters_missing_required>
              Test parameter validation with missing required.
            <Function test_interaction_registry_completeness>
              Test that all interactions in registry have required fields.
            <Function test_interaction_registry_no_duplicate_codes>
              Test that interaction codes are unique.
        <Module test_llm_models.py>
          Unit tests for LLM Models Registry.
          <Class TestSupportedModel>
            Tests for SupportedModel dataclass.
            <Function test_model_creation>
              Test creating a model definition.
          <Class TestModelRegistry>
            Tests for model registry functions.
            <Function test_get_model_exists>
              Test retrieving existing model from registry.
            <Function test_get_model_not_found>
              Test helpful error when model not in registry.
            <Function test_list_models_all>
              Test listing all models.
            <Function test_list_models_active_only>
              Test filtering to active models only.
            <Function test_list_models_by_provider>
              Test filtering models by provider.
            <Function test_list_models_by_capability>
              Test filtering models by capability.
            <Function test_list_models_combined_filters>
              Test combining multiple filters.
            <Function test_get_model_provider_class>
              Test getting provider class for model.
            <Function test_model_registry_completeness>
              Test that all models in registry have required fields.
            <Function test_model_registry_no_duplicate_codes>
              Test that model codes are unique.
            <Function test_all_models_have_chat_capability>
              Test that all models support chat (basic requirement).
        <Module test_types.py>
          Unit tests for core type system.
          
          Tests domain ID types and factory functions to ensure type safety
          and proper ID generation.
          <Class TestConversationId>
            Test suite for ConversationId type.
            <Function test_create_conversation_id_generates_unique_ids>
              Test that create_conversation_id generates unique IDs.
            <Function test_create_conversation_id_has_correct_prefix>
              Test that conversation IDs have the 'conv_' prefix.
            <Function test_create_conversation_id_contains_valid_uuid>
              Test that conversation ID contains a valid UUID.
            <Function test_conversation_id_is_string_at_runtime>
              Test that ConversationId behaves as string at runtime.
          <Class TestTemplateId>
            Test suite for TemplateId type.
            <Function test_create_template_id_generates_unique_ids>
              Test that create_template_id generates unique IDs.
            <Function test_create_template_id_has_correct_prefix>
              Test that template IDs have the 'tmpl_' prefix.
            <Function test_create_template_id_contains_valid_uuid>
              Test that template ID contains a valid UUID.
          <Class TestAnalysisRequestId>
            Test suite for AnalysisRequestId type.
            <Function test_create_analysis_request_id_generates_unique_ids>
              Test that create_analysis_request_id generates unique IDs.
            <Function test_create_analysis_request_id_has_correct_prefix>
              Test that analysis request IDs have the 'anls_' prefix.
            <Function test_create_analysis_request_id_contains_valid_uuid>
              Test that analysis request ID contains a valid UUID.
          <Class TestUserId>
            Test suite for UserId type.
            <Function test_create_user_id_with_valid_string>
              Test creating a user ID from a valid string.
            <Function test_create_user_id_preserves_input>
              Test that create_user_id preserves the input string.
            <Function test_create_user_id_with_empty_string>
              Test creating a user ID with an empty string.
          <Class TestTenantId>
            Test suite for TenantId type.
            <Function test_create_tenant_id_with_valid_string>
              Test creating a tenant ID from a valid string.
            <Function test_create_tenant_id_preserves_input>
              Test that create_tenant_id preserves the input string.
          <Class TestMessageId>
            Test suite for MessageId type.
            <Function test_create_message_id_generates_unique_ids>
              Test that create_message_id generates unique IDs.
            <Function test_create_message_id_has_correct_prefix>
              Test that message IDs have the 'msg_' prefix.
            <Function test_create_message_id_contains_valid_uuid>
              Test that message ID contains a valid UUID.
          <Class TestSessionId>
            Test suite for SessionId type.
            <Function test_create_session_id_generates_unique_ids>
              Test that create_session_id generates unique IDs.
            <Function test_create_session_id_has_correct_prefix>
              Test that session IDs have the 'sess_' prefix.
            <Function test_create_session_id_contains_valid_uuid>
              Test that session ID contains a valid UUID.
          <Class TestTypeSafety>
            Test suite for type safety across all ID types.
            <Function test_all_id_types_are_strings_at_runtime>
              Test that all ID types behave as strings at runtime.
            <Function test_id_types_can_be_used_in_string_operations>
              Test that ID types support string operations.
            <Function test_id_uniqueness_across_multiple_calls>
              Test that generating many IDs produces unique values.
            <Function test_id_types_can_be_compared>
              Test that ID types support comparison operations.
            <Function test_id_types_can_be_hashed>
              Test that ID types can be used as dictionary keys.
            <Function test_user_id_with_special_characters>
              Test user ID creation with various formats.
            <Function test_tenant_id_with_special_characters>
              Test tenant ID creation with various formats.
      <Dir domain>
        <Package entities>
          <Module test_analysis_request.py>
            Unit tests for AnalysisRequest value object.
            <Class TestAnalysisRequestCreation>
              Test suite for AnalysisRequest creation.
              <Function test_create_analysis_request_with_required_fields>
                Test creating analysis request with required fields.
              <Function test_create_analysis_request_with_goals>
                Test creating analysis request with goals.
            <Class TestAnalysisRequestImmutability>
              Test suite for immutability.
              <Function test_analysis_request_is_immutable>
                Test that analysis request is immutable.
            <Class TestAnalysisRequestMethods>
              Test suite for utility methods.
              <Function test_has_goals_returns_false_when_empty>
                Test has_goals returns False when goals is empty.
              <Function test_has_goals_returns_true_when_present>
                Test has_goals returns True when goals exist.
              <Function test_is_alignment_analysis_returns_true_for_alignment>
                Test is_alignment_analysis for alignment type.
              <Function test_is_strategy_analysis_returns_true_for_strategy>
                Test is_strategy_analysis for strategy type.
              <Function test_is_swot_analysis_returns_true_for_swot>
                Test is_swot_analysis for SWOT type.
          <Module test_conversation.py>
            Unit tests for Conversation aggregate root.
            <Class TestConversationCreation>
              Test suite for Conversation creation.
              <Function test_create_conversation_with_required_fields>
                Test creating conversation with required fields.
              <Function test_create_conversation_initializes_timestamps>
                Test that timestamps are auto-initialized.
            <Class TestConversationMessageManagement>
              Test suite for message management.
              <Function test_add_message_to_active_conversation>
                Test adding message to active conversation.
              <Function test_add_user_message_increments_response_count>
                Test that user messages increment response count.
              <Function test_add_assistant_message_does_not_increment_response_count>
                Test that assistant messages don't increment response count.
              <Function test_add_message_updates_timestamp>
                Test that adding message updates conversation timestamp.
              <Function test_add_message_to_completed_conversation_raises_error>
                Test that adding message to completed conversation raises error.
              <Function test_add_message_to_paused_conversation_raises_error>
                Test that adding message to paused conversation raises error.
              <Function test_add_message_with_metadata>
                Test adding message with metadata.
            <Class TestConversationPhaseTransitions>
              Test suite for phase transition business rules.
              <Function test_transition_to_next_phase>
                Test transitioning to next phase.
              <Function test_transition_updates_progress_percentage>
                Test that phase transition updates progress.
              <Function test_transition_to_same_phase_succeeds>
                Test that staying in same phase is allowed.
              <Function test_transition_backward_raises_error>
                Test that backward phase transition is not allowed.
              <Function test_transition_paused_conversation_raises_error>
                Test that paused conversations cannot transition.
              <Function test_transition_updates_timestamp>
                Test that phase transition updates timestamp.
            <Class TestConversationInsights>
              Test suite for insight management.
              <Function test_add_insight>
                Test adding insight to conversation.
              <Function test_add_multiple_insights>
                Test adding multiple insights.
              <Function test_add_insight_strips_whitespace>
                Test that insight whitespace is stripped.
              <Function test_add_empty_insight_raises_error>
                Test that empty insight raises error.
              <Function test_add_whitespace_only_insight_raises_error>
                Test that whitespace-only insight raises error.
            <Class TestConversationStatusTransitions>
              Test suite for status transition business rules.
              <Function test_mark_completed_in_validation_phase>
                Test marking conversation completed in validation phase.
              <Function test_mark_completed_in_completion_phase>
                Test marking conversation completed in completion phase.
              <Function test_mark_completed_in_early_phase_raises_error>
                Test that completing early phase conversation raises error.
              <Function test_mark_paused>
                Test pausing active conversation.
              <Function test_mark_paused_when_already_paused_raises_error>
                Test that pausing paused conversation raises error.
              <Function test_resume_paused_conversation>
                Test resuming paused conversation.
              <Function test_resume_active_conversation_raises_error>
                Test that resuming active conversation raises error.
            <Class TestConversationUtilityMethods>
              Test suite for utility methods.
              <Function test_is_active_returns_true_for_active>
                Test is_active returns True for active conversation.
              <Function test_is_completed_returns_false_for_active>
                Test is_completed returns False for active conversation.
              <Function test_get_message_count>
                Test getting total message count.
              <Function test_get_user_message_count>
                Test getting user message count.
              <Function test_get_assistant_message_count>
                Test getting assistant message count.
              <Function test_calculate_progress_percentage>
                Test calculating progress percentage.
              <Function test_get_conversation_history>
                Test getting conversation history.
              <Function test_get_conversation_history_with_max_messages>
                Test getting limited conversation history.
          <Module test_llm_topic.py>
            Unit tests for LLMTopic entity.
            <Class TestPromptInfo>
              Tests for PromptInfo dataclass.
              <Function test_to_dict>
                Test conversion to dictionary.
              <Function test_from_dict>
                Test creation from dictionary.
              <Function test_roundtrip_serialization>
                Test that to_dict and from_dict are inverse operations.
            <Class TestParameterDefinition>
              Tests for ParameterDefinition dataclass.
              <Function test_to_dict_with_all_fields>
                Test conversion with all fields populated.
              <Function test_to_dict_minimal_fields>
                Test conversion with only required fields.
              <Function test_from_dict>
                Test creation from dictionary.
              <Function test_roundtrip_serialization>
                Test that to_dict and from_dict are inverse operations.
            <Class TestLLMTopic>
              Tests for LLMTopic entity.
              <Function test_valid_topic_types>
                Test that valid topic types are accepted.
              <Function test_invalid_topic_type_raises_error>
                Test that invalid topic_type raises exception.
              <Function test_to_dynamodb_item>
                Test conversion to DynamoDB item.
              <Function test_from_dynamodb_item>
                Test creation from DynamoDB item.
              <Function test_roundtrip_serialization>
                Test that to_dynamodb_item and from_dynamodb_item are inverse operations.
              <Function test_get_prompt>
                Test getting prompt by type.
              <Function test_has_prompt>
                Test checking if prompt exists.
              <Function test_get_parameter>
                Test getting parameter by name.
              <Function test_has_parameter>
                Test checking if parameter exists.
              <Function test_minimal_topic>
                Test creating topic with minimal required fields.
          <Module test_prompt_template.py>
            Unit tests for PromptTemplate aggregate root.
            <Class TestPromptTemplateCreation>
              Test suite for PromptTemplate creation.
              <Function test_create_template_with_required_fields>
                Test creating template with required fields.
              <Function test_create_template_with_no_variables>
                Test creating template without variables.
            <Class TestPromptTemplateValidation>
              Test suite for template validation.
              <Function test_create_template_with_empty_name_raises_error>
                Test that empty name raises error.
              <Function test_create_template_with_whitespace_only_name_raises_error>
                Test that whitespace-only name raises error.
              <Function test_create_template_with_invalid_variable_name_raises_error>
                Test that invalid variable names raise error.
            <Class TestPromptTemplateRendering>
              Test suite for template rendering.
              <Function test_render_template_with_all_variables>
                Test rendering template with all variables provided.
              <Function test_render_template_with_missing_variables_raises_error>
                Test that missing variables raise error.
              <Function test_render_template_with_no_variables>
                Test rendering template without variables.
            <Class TestPromptTemplateActivation>
              Test suite for template activation.
              <Function test_deactivate_active_template>
                Test deactivating an active template.
              <Function test_deactivate_inactive_template_raises_error>
                Test that deactivating inactive template raises error.
              <Function test_activate_inactive_template>
                Test activating an inactive template.
              <Function test_activate_active_template_raises_error>
                Test that activating active template raises error.
            <Class TestPromptTemplateVersioning>
              Test suite for template versioning.
              <Function test_create_new_version_increments_version_number>
                Test that creating new version increments version.
              <Function test_create_new_version_updates_template_text>
                Test that new version updates template text.
              <Function test_create_new_version_with_empty_text_raises_error>
                Test that empty new text raises error.
            <Class TestPromptTemplateUtilityMethods>
              Test suite for utility methods.
              <Function test_get_variable_placeholders>
                Test getting variable placeholders.
              <Function test_get_variable_placeholders_empty>
                Test getting placeholders for template with no variables.
        <Package events>
          <Module test_analysis_events.py>
            Unit tests for analysis domain events.
            <Class TestAnalysisRequested>
              Tests for AnalysisRequested event.
              <Function test_create_analysis_requested_event>
                Test creating analysis requested event.
              <Function test_create_without_context>
                Test creating event without request context.
              <Function test_serialization>
                Test event serialization.
            <Class TestAnalysisCompleted>
              Tests for AnalysisCompleted event.
              <Function test_create_completed_event>
                Test creating analysis completed event.
              <Function test_duration_validation>
                Test that duration must be non-negative.
              <Function test_confidence_score_validation>
                Test that confidence score must be within 0-100.
            <Class TestAnalysisFailed>
              Tests for AnalysisFailed event.
              <Function test_create_failed_event>
                Test creating analysis failed event.
              <Function test_non_retryable_failure>
                Test failed event for non-retryable error.
              <Function test_retry_count_default>
                Test that retry_count defaults to 0.
          <Module test_base_event.py>
            Unit tests for base DomainEvent.
            <Class TestDomainEventCreation>
              Test suite for DomainEvent creation and initialization.
              <Function test_create_event_with_required_fields>
                Test creating event with only required fields.
              <Function test_create_event_with_all_fields>
                Test creating event with all fields.
              <Function test_event_id_auto_generation>
                Test that event_id is auto-generated as UUID.
            <Class TestDomainEventImmutability>
              Test suite for event immutability.
              <Function test_event_is_frozen>
                Test that events cannot be modified after creation.
              <Function test_metadata_is_not_frozen>
                Test that metadata dict can be modified (mutable field).
            <Class TestDomainEventSerialization>
              Test suite for event serialization and deserialization.
              <Function test_to_dict>
                Test converting event to dictionary.
              <Function test_to_json>
                Test converting event to JSON string.
              <Function test_from_dict>
                Test reconstructing event from dictionary.
              <Function test_from_dict_with_iso_timestamp>
                Test deserializing event with ISO format timestamp.
            <Class TestDomainEventTraceability>
              Test suite for correlation and causation tracking.
              <Function test_correlation_id_propagation>
                Test that correlation_id can be set for tracing.
              <Function test_causation_chain>
                Test tracking causation chain across events.
          <Module test_conversation_events.py>
            Unit tests for conversation domain events.
            <Class TestConversationInitiated>
              Tests for ConversationInitiated event.
              <Function test_create_conversation_initiated_event>
                Test creating conversation initiated event.
              <Function test_event_is_immutable>
                Test that event cannot be modified.
              <Function test_serialization>
                Test event can be serialized and deserialized.
            <Class TestMessageAdded>
              Tests for MessageAdded event.
              <Function test_create_user_message_event>
                Test creating message added event for user message.
              <Function test_create_assistant_message_event>
                Test creating message added event for assistant message.
              <Function test_message_index_validation>
                Test that message_index must be non-negative.
            <Class TestPhaseTransitioned>
              Tests for PhaseTransitioned event.
              <Function test_create_phase_transition_event>
                Test creating phase transition event.
              <Function test_transition_without_reason>
                Test transition event without specific reason.
              <Function test_progress_validation>
                Test that progress must be within 0-100.
            <Class TestConversationCompleted>
              Tests for ConversationCompleted event.
              <Function test_create_completed_event>
                Test creating conversation completed event.
              <Function test_message_count_validation>
                Test that total_messages must be non-negative.
            <Class TestConversationPaused>
              Tests for ConversationPaused event.
              <Function test_create_paused_event>
                Test creating conversation paused event.
              <Function test_cannot_resume_scenario>
                Test paused event where resumption is not allowed.
            <Class TestConversationResumed>
              Tests for ConversationResumed event.
              <Function test_create_resumed_event>
                Test creating conversation resumed event.
        <Package exceptions>
          <Module test_analysis_exceptions.py>
            Unit tests for analysis domain exceptions.
            <Class TestInvalidAnalysisRequest>
              Tests for InvalidAnalysisRequest exception.
              <Function test_create_with_single_error>
                Test creating exception with single validation error.
              <Function test_create_with_multiple_errors>
                Test exception with multiple validation errors.
              <Function test_create_without_request_id>
                Test exception without request ID.
            <Class TestEnrichmentFailed>
              Tests for EnrichmentFailed exception.
              <Function test_create_with_basic_info>
                Test creating exception with basic failure info.
              <Function test_create_with_user_and_tenant>
                Test exception with user and tenant context.
              <Function test_retryable_enrichment_failure>
                Test retryable enrichment failure.
            <Class TestAnalysisNotFound>
              Tests for AnalysisNotFound exception.
              <Function test_create_with_request_id_only>
                Test creating exception with just request ID.
              <Function test_create_with_analysis_type>
                Test exception with analysis type context.
            <Class TestUnsupportedAnalysisType>
              Tests for UnsupportedAnalysisType exception.
              <Function test_create_with_supported_types>
                Test creating exception with list of supported types.
              <Function test_message_lists_supported_types>
                Test that message clearly lists supported types.
            <Class TestAnalysisTimeout>
              Tests for AnalysisTimeout exception.
              <Function test_create_with_timing_info>
                Test creating exception with timeout timing.
              <Function test_message_includes_analysis_type>
                Test that message includes analysis type.
              <Function test_context_includes_all_timing_data>
                Test that context includes all timing information.
            <Class TestInsufficientDataForAnalysis>
              Tests for InsufficientDataForAnalysis exception.
              <Function test_create_with_missing_fields>
                Test creating exception with list of missing fields.
              <Function test_create_without_completeness_score>
                Test exception without data completeness percentage.
              <Function test_message_lists_missing_fields>
                Test that message clearly lists all missing fields.
          <Module test_base_exception.py>
            Unit tests for base DomainException.
            <Class TestDomainExceptionCreation>
              Test suite for DomainException creation.
              <Function test_create_with_all_parameters>
                Test creating exception with all parameters.
              <Function test_create_without_context>
                Test creating exception without context.
              <Function test_exception_inherits_from_exception>
                Test that DomainException inherits from Exception.
            <Class TestDomainExceptionStringRepresentation>
              Test suite for exception string representations.
              <Function test_str_without_context>
                Test __str__ without context.
              <Function test_str_with_context>
                Test __str__ with context.
              <Function test_repr>
                Test __repr__ for debugging.
            <Class TestDomainExceptionSerialization>
              Test suite for exception serialization.
              <Function test_to_dict>
                Test converting exception to dictionary.
              <Function test_to_dict_structure>
                Test that to_dict returns correct structure.
            <Class TestDomainExceptionRaising>
              Test suite for raising exceptions.
              <Function test_raise_and_catch>
                Test raising and catching domain exception.
              <Function test_raise_with_context>
                Test raising exception with context data.
              <Function test_catch_as_base_exception>
                Test catching domain exception as base Exception.
            <Class TestDomainExceptionSubclassing>
              Test suite for creating exception subclasses.
              <Function test_create_custom_exception_subclass>
                Test creating custom exception that inherits from DomainException.
              <Function test_subclass_to_dict_includes_type>
                Test that subclass type is included in to_dict.
          <Module test_conversation_exceptions.py>
            Unit tests for conversation domain exceptions.
            <Class TestConversationNotFound>
              Tests for ConversationNotFound exception.
              <Function test_create_with_conversation_id_only>
                Test creating exception with just conversation ID.
              <Function test_create_with_tenant_id>
                Test creating exception with tenant context.
              <Function test_raise_and_catch>
                Test raising and catching the exception.
            <Class TestInvalidPhaseTransition>
              Tests for InvalidPhaseTransition exception.
              <Function test_create_with_basic_info>
                Test creating exception with basic transition info.
              <Function test_create_with_reason>
                Test creating exception with specific reason.
              <Function test_backward_transition_scenario>
                Test exception for backward phase transition.
            <Class TestConversationNotActive>
              Tests for ConversationNotActive exception.
              <Function test_create_for_completed_conversation>
                Test exception when trying to modify completed conversation.
              <Function test_create_for_paused_conversation>
                Test exception when trying to modify paused conversation.
              <Function test_create_for_abandoned_conversation>
                Test exception for abandoned conversation.
            <Class TestInvalidMessageContent>
              Tests for InvalidMessageContent exception.
              <Function test_create_with_single_validation_error>
                Test exception with single validation error.
              <Function test_create_with_multiple_validation_errors>
                Test exception with multiple validation errors.
              <Function test_create_without_content_length>
                Test exception without content length.
            <Class TestConversationTTLExpired>
              Tests for ConversationTTLExpired exception.
              <Function test_create_with_expiry_time>
                Test creating exception with expiry timestamp.
              <Function test_message_includes_expiry_time>
                Test that message clearly states when conversation expired.
            <Class TestConversationCompletionError>
              Tests for ConversationCompletionError exception.
              <Function test_create_with_single_missing_requirement>
                Test exception with single missing requirement.
              <Function test_create_with_multiple_missing_requirements>
                Test exception with multiple missing requirements.
              <Function test_create_without_progress>
                Test exception without progress percentage.
        <Package services>
          <Module test_alignment_calculator.py>
            Unit tests for AlignmentCalculator domain service.
            <Class TestAlignmentCalculatorBasics>
              Test suite for basic alignment calculation.
              <Function test_calculate_alignment_with_complete_data>
                Test alignment calculation with complete data.
              <Function test_calculate_alignment_returns_valid_component_scores>
                Test that component scores are valid.
              <Function test_calculate_alignment_returns_valid_foundation_scores>
                Test that foundation scores are valid.
            <Class TestAlignmentCalculatorComponentScoring>
              Test suite for component score calculations.
              <Function test_vision_alignment_with_missing_vision>
                Test vision scoring with missing vision data.
              <Function test_vision_alignment_with_complete_data>
                Test vision scoring with complete data.
              <Function test_operations_alignment_calculation>
                Test operations scoring logic.
              <Function test_culture_alignment_with_missing_values>
                Test culture scoring with missing values.
            <Class TestAlignmentCalculatorFoundationScoring>
              Test suite for foundation score calculations.
              <Function test_purpose_alignment_with_missing_purpose>
                Test purpose scoring with missing purpose.
              <Function test_purpose_alignment_with_clarity>
                Test purpose scoring with clarity data.
              <Function test_values_alignment_with_no_values>
                Test values scoring with no values.
              <Function test_values_alignment_with_few_values>
                Test values scoring with few values.
              <Function test_values_alignment_with_many_values>
                Test values scoring with good number of values.
              <Function test_mission_alignment_with_clarity>
                Test mission scoring with clarity.
            <Class TestAlignmentCalculatorConfidence>
              Test suite for confidence calculations.
              <Function test_confidence_with_complete_data>
                Test confidence with all required fields.
              <Function test_confidence_with_minimal_data>
                Test confidence with minimal data.
              <Function test_confidence_has_minimum_floor>
                Test that confidence has minimum threshold.
            <Class TestAlignmentCalculatorEdgeCases>
              Test suite for edge cases.
              <Function test_calculate_alignment_with_empty_context>
                Test calculation with empty context.
              <Function test_calculate_alignment_with_extreme_high_scores>
                Test calculation with very high input scores.
              <Function test_overall_score_weighted_correctly>
                Test that overall score uses correct weighting.
          <Module test_completion_validator.py>
            Unit tests for CompletionValidator domain service.
            <Class TestCompletionValidatorBasics>
              Test suite for basic completion validation.
              <Function test_cannot_complete_early_phase_conversation>
                Test that conversations in early phases cannot complete.
              <Function test_cannot_complete_paused_conversation>
                Test that paused conversations cannot complete.
              <Function test_can_complete_with_all_requirements_met>
                Test completion with all requirements met.
            <Class TestCompletionValidatorDetailed>
              Test suite for detailed validation feedback.
              <Function test_validate_completion_returns_reasons_for_failure>
                Test that validation provides specific failure reasons.
              <Function test_validate_completion_identifies_missing_messages>
                Test that validation identifies insufficient messages.
              <Function test_validate_completion_identifies_missing_insights>
                Test that validation identifies insufficient insights.
              <Function test_validate_completion_success_returns_empty_reasons>
                Test that successful validation returns empty reasons.
            <Class TestCompletionValidatorProgress>
              Test suite for completion progress calculations.
              <Function test_get_completion_progress_at_zero>
                Test progress calculation with no criteria met.
              <Function test_get_completion_progress_partial>
                Test progress calculation with some criteria met.
              <Function test_get_completion_progress_at_full>
                Test progress calculation with all criteria met.
            <Class TestCompletionValidatorRequirements>
              Test suite for specific requirement checks.
              <Function test_validates_minimum_total_messages>
                Test validation of minimum total messages.
              <Function test_validates_minimum_user_responses>
                Test validation of minimum user responses.
              <Function test_validates_minimum_assistant_messages>
                Test validation of minimum assistant messages.
          <Module test_phase_transition_service.py>
            Unit tests for PhaseTransitionService domain service.
            <Class TestPhaseTransitionServiceBasics>
              Test suite for basic phase transition functionality.
              <Function test_can_transition_to_exploration_from_introduction>
                Test basic forward transition.
              <Function test_cannot_transition_backward>
                Test that backward transitions are not allowed.
              <Function test_cannot_transition_paused_conversation>
                Test that paused conversations cannot transition.
            <Class TestPhaseTransitionRequirements>
              Test suite for phase transition requirements.
              <Function test_get_transition_requirements_for_exploration>
                Test getting requirements for exploration phase.
              <Function test_can_transition_with_sufficient_responses_and_insights>
                Test transition with sufficient requirements met.
              <Function test_cannot_transition_without_sufficient_responses>
                Test that insufficient responses blocks transition.
              <Function test_cannot_transition_without_sufficient_insights>
                Test that insufficient insights blocks transition.
            <Class TestPhaseTransitionNextPhase>
              Test suite for getting next phase.
              <Function test_get_next_phase_when_requirements_met>
                Test getting next phase when requirements are met.
              <Function test_get_next_phase_when_requirements_not_met>
                Test that None returned when requirements not met.
              <Function test_get_next_phase_returns_none_at_completion>
                Test that None returned when at completion phase.
            <Class TestPhaseTransitionReadiness>
              Test suite for phase readiness calculations.
              <Function test_calculate_phase_readiness_at_zero_percent>
                Test readiness calculation with no progress.
              <Function test_calculate_phase_readiness_at_fifty_percent>
                Test readiness calculation at 50%.
              <Function test_calculate_phase_readiness_at_full>
                Test readiness calculation at 100%.
        <Package value_objects>
          <Module test_alignment_score.py>
            Unit tests for alignment score value objects.
            <Class TestComponentScores>
              Test suite for ComponentScores value object.
              <Function test_create_component_scores_with_valid_values>
                Test creating ComponentScores with valid values.
              <Function test_component_scores_with_score_below_zero_raises_error>
                Test that score below 0 raises ValidationError.
              <Function test_component_scores_with_score_above_100_raises_error>
                Test that score above 100 raises ValidationError.
              <Function test_component_scores_is_immutable>
                Test that ComponentScores is immutable.
              <Function test_get_average_score_returns_correct_average>
                Test get_average_score calculates correctly.
              <Function test_get_lowest_component_identifies_minimum>
                Test get_lowest_component returns the lowest scoring component.
              <Function test_get_highest_component_identifies_maximum>
                Test get_highest_component returns the highest scoring component.
            <Class TestFoundationAlignment>
              Test suite for FoundationAlignment value object.
              <Function test_create_foundation_alignment_with_valid_values>
                Test creating FoundationAlignment with valid values.
              <Function test_foundation_alignment_with_score_below_zero_raises_error>
                Test that score below 0 raises ValidationError.
              <Function test_foundation_alignment_with_score_above_100_raises_error>
                Test that score above 100 raises ValidationError.
              <Function test_foundation_alignment_is_immutable>
                Test that FoundationAlignment is immutable.
              <Function test_get_average_score_returns_correct_average>
                Test get_average_score calculates correctly.
              <Function test_is_well_aligned_returns_true_above_threshold>
                Test is_well_aligned returns True when above threshold.
              <Function test_is_well_aligned_uses_default_threshold>
                Test is_well_aligned uses default threshold of 70.
            <Class TestAlignmentScore>
              Test suite for AlignmentScore value object.
              <Function test_create_alignment_score_with_all_fields>
                Test creating AlignmentScore with all fields.
              <Function test_alignment_score_uses_default_confidence>
                Test that confidence_level defaults to 80.0.
              <Function test_alignment_score_with_empty_explanation_raises_error>
                Test that empty explanation raises ValidationError.
              <Function test_alignment_score_with_whitespace_only_explanation_raises_error>
                Test that whitespace-only explanation raises ValidationError.
              <Function test_alignment_score_strips_whitespace_from_explanation>
                Test that explanation whitespace is stripped.
              <Function test_alignment_score_is_immutable>
                Test that AlignmentScore is immutable.
              <Function test_is_strong_alignment_returns_true_above_threshold>
                Test is_strong_alignment with score above threshold.
              <Function test_is_weak_alignment_returns_true_below_threshold>
                Test is_weak_alignment with score below threshold.
              <Function test_has_high_confidence_checks_confidence_level>
                Test has_high_confidence checks confidence level.
              <Function test_get_gap_areas_identifies_low_components>
                Test get_gap_areas identifies components below threshold.
              <Function test_get_gap_areas_returns_empty_when_all_above_threshold>
                Test get_gap_areas returns empty when all scores high.
          <Module test_conversation_context.py>
            Unit tests for ConversationContext value object.
            <Class TestConversationContextCreation>
              Test suite for ConversationContext creation.
              <Function test_create_context_with_required_fields_only>
                Test creating context with only required field.
              <Function test_create_context_with_all_fields>
                Test creating context with all fields.
              <Function test_create_context_strips_whitespace_from_insights>
                Test that whitespace is stripped from insights.
            <Class TestConversationContextValidation>
              Test suite for ConversationContext validation.
              <Function test_create_context_with_negative_response_count_raises_error>
                Test that negative response count raises error.
              <Function test_create_context_with_progress_below_zero_raises_error>
                Test that progress below 0 raises error.
              <Function test_create_context_with_progress_above_100_raises_error>
                Test that progress above 100 raises error.
              <Function test_create_context_with_empty_insight_raises_error>
                Test that empty insight string raises error.
              <Function test_create_context_with_whitespace_only_insight_raises_error>
                Test that whitespace-only insight raises error.
              <Function test_create_context_with_invalid_phase_raises_error>
                Test that invalid phase raises error.
            <Class TestConversationContextImmutability>
              Test suite for ConversationContext immutability.
              <Function test_context_is_immutable>
                Test that context fields cannot be modified.
              <Function test_context_response_count_cannot_be_changed>
                Test that response count cannot be changed.
              <Function test_context_progress_cannot_be_changed>
                Test that progress percentage cannot be changed.
            <Class TestConversationContextMethods>
              Test suite for ConversationContext utility methods.
              <Function test_has_insights_returns_false_when_empty>
                Test has_insights returns False for empty insights.
              <Function test_has_insights_returns_true_when_present>
                Test has_insights returns True when insights exist.
              <Function test_get_insight_count_returns_correct_count>
                Test get_insight_count returns the correct number.
              <Function test_is_in_phase_returns_true_for_current_phase>
                Test is_in_phase returns True for current phase.
              <Function test_has_sufficient_responses_checks_minimum>
                Test has_sufficient_responses compares against minimum.
              <Function test_is_complete_returns_true_at_100_percent>
                Test is_complete returns True when progress is 100%.
              <Function test_is_complete_returns_false_below_100_percent>
                Test is_complete returns False when progress < 100%.
            <Class TestConversationContextPhaseChecks>
              Test suite for phase checking methods.
              <Function test_is_introduction_phase_returns_true_for_introduction>
                Test is_introduction_phase for introduction phase.
              <Function test_is_exploration_phase_returns_true_for_exploration>
                Test is_exploration_phase for exploration phase.
              <Function test_is_deepening_phase_returns_true_for_deepening>
                Test is_deepening_phase for deepening phase.
              <Function test_is_synthesis_phase_returns_true_for_synthesis>
                Test is_synthesis_phase for synthesis phase.
              <Function test_is_validation_phase_returns_true_for_validation>
                Test is_validation_phase for validation phase.
              <Function test_is_completion_phase_returns_true_for_completion>
                Test is_completion_phase for completion phase.
            <Class TestConversationContextEdgeCases>
              Test suite for edge cases and boundary conditions.
              <Function test_context_with_zero_progress>
                Test context with exactly 0% progress.
              <Function test_context_with_100_progress>
                Test context with exactly 100% progress.
              <Function test_context_with_zero_responses>
                Test context with zero responses.
              <Function test_context_with_empty_insights_list>
                Test context with explicitly empty insights list.
          <Module test_message.py>
            Unit tests for Message value object.
            <Class TestMessageCreation>
              Test suite for Message creation and validation.
              <Function test_create_message_with_required_fields>
                Test creating a message with only required fields.
              <Function test_create_message_with_all_fields>
                Test creating a message with all fields specified.
              <Function test_create_message_auto_generates_id>
                Test that message ID is auto-generated if not provided.
              <Function test_create_message_auto_generates_timestamp>
                Test that timestamp is auto-generated if not provided.
              <Function test_create_message_strips_whitespace_from_content>
                Test that leading/trailing whitespace is stripped from content.
            <Class TestMessageValidation>
              Test suite for Message validation rules.
              <Function test_create_message_with_empty_content_raises_error>
                Test that empty content raises ValidationError.
              <Function test_create_message_with_whitespace_only_content_raises_error>
                Test that whitespace-only content raises ValidationError.
              <Function test_create_message_with_future_timestamp_raises_error>
                Test that future timestamp raises ValidationError.
              <Function test_create_message_with_content_too_long_raises_error>
                Test that content exceeding max length raises ValidationError.
              <Function test_create_message_with_invalid_role_raises_error>
                Test that invalid role raises ValidationError.
            <Class TestMessageImmutability>
              Test suite for Message immutability.
              <Function test_message_is_immutable>
                Test that message fields cannot be modified after creation.
              <Function test_message_role_cannot_be_changed>
                Test that message role cannot be changed.
              <Function test_message_metadata_is_immutable>
                Test that message metadata dict is protected by frozen model.
            <Class TestMessageRoleChecks>
              Test suite for message role checking methods.
              <Function test_is_from_user_returns_true_for_user_message>
                Test is_from_user returns True for user messages.
              <Function test_is_from_assistant_returns_true_for_assistant_message>
                Test is_from_assistant returns True for assistant messages.
              <Function test_is_system_message_returns_true_for_system_message>
                Test is_system_message returns True for system messages.
            <Class TestMessageMethods>
              Test suite for Message utility methods.
              <Function test_get_content_length_returns_correct_length>
                Test get_content_length returns the correct character count.
              <Function test_has_metadata_returns_false_for_empty_metadata>
                Test has_metadata returns False when metadata is empty.
              <Function test_has_metadata_returns_true_when_metadata_exists>
                Test has_metadata returns True when metadata is provided.
            <Class TestMessageEquality>
              Test suite for Message equality.
              <Function test_messages_with_same_values_are_equal>
                Test that messages with identical values are equal.
              <Function test_messages_can_be_compared>
                Test that messages support equality comparison.
      <Dir services>
        <Module test_audit_log_service.py>
          Unit tests for AuditLogService.
          <Class TestAuditLogServiceInit>
            Test AuditLogService initialization.
            <Function test_init_creates_instance>
              Test that service initializes correctly.
          <Class TestAuditLogEntry>
            Test AuditLogEntry model.
            <Function test_create_audit_log_entry_with_required_fields>
              Test creating audit log entry with required fields.
            <Function test_create_audit_log_entry_with_all_fields>
              Test creating audit log entry with all fields.
          <Class TestAuditAction>
            Test AuditAction enum.
            <Function test_audit_action_values>
              Test that all audit action values are defined.
          <Class TestLogTemplateCreated>
            Test log_template_created method.
            <Coroutine test_log_template_created_basic>
              Test logging template creation with basic info.
            <Coroutine test_log_template_created_with_source_version>
              Test logging template creation with source version.
            <Coroutine test_log_template_created_with_ip_address>
              Test logging template creation with IP address.
          <Class TestLogTemplateUpdated>
            Test log_template_updated method.
            <Coroutine test_log_template_updated_basic>
              Test logging template update with basic info.
            <Coroutine test_log_template_updated_with_reason>
              Test logging template update with reason.
            <Coroutine test_log_template_updated_with_ip_address>
              Test logging template update with IP address.
          <Class TestLogTemplateDeleted>
            Test log_template_deleted method.
            <Coroutine test_log_template_deleted_basic>
              Test logging template deletion with basic info.
            <Coroutine test_log_template_deleted_with_reason>
              Test logging template deletion with reason.
          <Class TestLogVersionActivated>
            Test log_version_activated method.
            <Coroutine test_log_version_activated_basic>
              Test logging version activation with basic info.
            <Coroutine test_log_version_activated_with_previous_version>
              Test logging version activation with previous version.
            <Coroutine test_log_version_activated_with_reason>
              Test logging version activation with reason.
          <Class TestLogModelUpdated>
            Test log_model_updated method.
            <Coroutine test_log_model_updated_basic>
              Test logging model update with basic info.
            <Coroutine test_log_model_updated_with_reason>
              Test logging model update with reason.
          <Class TestLogTemplateTested>
            Test log_template_tested method.
            <Coroutine test_log_template_tested_success>
              Test logging successful template test.
            <Coroutine test_log_template_tested_failure>
              Test logging failed template test.
            <Coroutine test_log_template_tested_with_ip_address>
              Test logging template test with IP address.
      <Module test_bedrock_provider.py>
        Unit tests for BedrockLLMProvider.
        <Class TestBedrockProviderInitialization>
          Test BedrockLLMProvider initialization.
          <Function test_init_with_client>
            Test initialization with bedrock client.
          <Function test_init_with_custom_region>
            Test initialization with custom region.
        <Class TestBedrockProviderProperties>
          Test BedrockLLMProvider properties.
          <Function test_provider_name>
            Test provider_name property.
          <Function test_supported_models>
            Test supported_models property.
          <Function test_supported_models_returns_copy>
            Test that supported_models returns a copy.
        <Class TestBedrockProviderValidation>
          Test validation in BedrockLLMProvider.
          <Coroutine test_generate_validates_temperature_too_low>
            Test that temperature < 0 raises ValueError.
          <Coroutine test_generate_validates_temperature_too_high>
            Test that temperature > 1 raises ValueError.
          <Coroutine test_generate_validates_supported_model>
            Test that unsupported model raises ValueError.
          <Coroutine test_generate_accepts_valid_temperature_boundaries>
            Test that temperature 0.0 and 1.0 are accepted.
        <Class TestBedrockProviderModelSupport>
          Test model support detection.
          <Function test_supports_claude_models>
            Test that Claude models are supported.
          <Function test_supports_llama_models>
            Test that Llama models are supported.
        <Class TestBedrockProviderEdgeCases>
          Test edge cases in BedrockLLMProvider.
          <Coroutine test_generate_with_empty_messages>
            Test generate with empty messages list.
          <Coroutine test_generate_with_none_system_prompt>
            Test generate with None system prompt.
          <Coroutine test_generate_with_none_max_tokens>
            Test generate with None max_tokens.
        <Class TestBedrockProviderMultipleModels>
          Test behavior with different model types.
          <Coroutine test_generate_with_claude_model>
            Test generation with Claude model.
          <Coroutine test_generate_with_different_claude_versions>
            Test generation with different Claude versions.
        <Class TestBedrockProviderConfiguration>
          Test configuration options.
          <Function test_multiple_providers_different_regions>
            Test creating multiple providers with different regions.
          <Function test_provider_name_consistent>
            Test that provider_name is always 'bedrock'.
      <Module test_business_api_client.py>
        Unit tests for BusinessApiClient (Issue #48, refactored for MVP in #52).
        <Class TestBusinessApiClientInitialization>
          Test BusinessApiClient initialization.
          <Function test_init_with_default_values>
            Test initialization with default values.
          <Function test_init_strips_trailing_slash>
            Test that trailing slash is removed from base_url.
          <Function test_init_with_custom_values>
            Test initialization with custom timeout and retries.
        <Class TestBusinessApiClientHeaders>
          Test HTTP header generation.
          <Function test_get_headers_without_token>
            Test headers without JWT token.
          <Function test_get_headers_with_token>
            Test headers with JWT token.
        <Class TestBusinessApiClientUserContext>
          Test get_user_context method.
          <Coroutine test_get_user_context_success>
            Test successful user context retrieval.
          <Coroutine test_get_user_context_http_error>
            Test HTTP error handling.
          <Coroutine test_get_user_context_request_error>
            Test request error handling.
        <Class TestBusinessApiClientOrganizationalContext>
          Test get_organizational_context method.
          <Coroutine test_get_organizational_context_success>
            Test successful organizational context retrieval.
          <Coroutine test_get_organizational_context_with_headers>
            Test that proper headers are sent.
        <Class TestBusinessApiClientUserGoals>
          Test get_user_goals method.
          <Coroutine test_get_user_goals_success>
            Test successful goals retrieval.
          <Coroutine test_get_user_goals_empty_list>
            Test handling of empty goals list.
          <Coroutine test_get_user_goals_non_list_response>
            Test handling of non-list response (returns empty list).
        <Class TestBusinessApiClientMetrics>
          Test get_metrics method.
          <Coroutine test_get_metrics_success>
            Test successful metrics retrieval.
          <Coroutine test_get_metrics_with_entity_types>
            Test metrics retrieval for different entity types.
        <Class TestBusinessApiClientClose>
          Test client cleanup.
          <Coroutine test_close_client>
            Test proper client cleanup.
        <Class TestBusinessApiClientEdgeCases>
          Test edge cases and error scenarios.
          <Function test_empty_base_url>
            Test handling of empty base URL.
          <Function test_none_jwt_token>
            Test handling of None JWT token.
          <Coroutine test_multiple_concurrent_requests>
            Test handling of concurrent requests.
      <Module test_config.py>
        Unit tests for configuration management.
        <Class TestSettings>
          Test configuration settings.
          <Function test_default_settings>
            Test default configuration values.
          <Function test_environment_override>
            Test environment variable override.
          <Function test_get_settings_singleton>
            Test that get_settings returns singleton.
          <Function test_llm_prompts_table_default>
            Test LLM prompts table default configuration.
          <Function test_llm_prompts_table_environment_override>
            Test LLM prompts table environment variable override.
      <Module test_constants.py>
        Unit tests for core constants and enums.
        <Class TestCoachingTopicEnum>
          Test CoachingTopic enum.
          <Function test_all_topics_defined>
            Test that all expected topics are defined.
          <Function test_topic_values_are_strings>
            Test that all topic values are strings.
          <Function test_topic_count>
            Test expected number of topics.
        <Class TestConversationStatusEnum>
          Test ConversationStatus enum.
          <Function test_all_statuses_defined>
            Test that all expected statuses are defined.
          <Function test_status_values_are_strings>
            Test that all status values are strings.
          <Function test_status_count>
            Test expected number of statuses.
        <Class TestConversationPhaseEnum>
          Test ConversationPhase enum.
          <Function test_all_phases_defined>
            Test that all expected phases are defined.
          <Function test_phase_values_are_strings>
            Test that all phase values are strings.
          <Function test_phase_count>
            Test expected number of phases.
        <Class TestMessageRoleEnum>
          Test MessageRole enum.
          <Function test_all_roles_defined>
            Test that all expected roles are defined.
          <Function test_role_values_are_strings>
            Test that all role values are strings.
        <Class TestAnalysisTypeEnum>
          Test AnalysisType enum.
          <Function test_all_analysis_types_defined>
            Test that all expected analysis types are defined.
          <Function test_analysis_type_count>
            Test expected number of analysis types.
        <Class TestPhaseProgressWeights>
          Test PHASE_PROGRESS_WEIGHTS constant.
          <Function test_all_phases_have_weights>
            Test that all phases have progress weights.
          <Function test_weights_are_between_0_and_1>
            Test that all weights are valid percentages.
          <Function test_weights_are_ascending>
            Test that weights increase through phases.
          <Function test_completion_weight_is_100_percent>
            Test that completion phase is 100%.
          <Function test_introduction_weight_is_low>
            Test that introduction phase has low weight.
        <Class TestPhaseRequirements>
          Test PHASE_REQUIREMENTS constant.
          <Function test_exploration_requirements>
            Test exploration phase requirements.
          <Function test_deepening_requirements>
            Test deepening phase requirements.
          <Function test_synthesis_requirements>
            Test synthesis phase requirements.
          <Function test_validation_requirements>
            Test validation phase requirements.
          <Function test_completion_requirements>
            Test completion phase requirements.
        <Class TestDefaultLLMModels>
          Test DEFAULT_LLM_MODELS constant.
          <Function test_all_topics_have_default_models>
            Test that all coaching topics have default models.
          <Function test_models_are_strings>
            Test that all model IDs are strings.
          <Function test_models_are_anthropic_claude>
            Test that all default models are Anthropic Claude.
          <Function test_model_count_matches_topics>
            Test that we have a model for each topic.
        <Class TestConstantsIntegrity>
          Test integrity and relationships between constants.
          <Function test_phase_requirements_keys_are_phases>
            Test that phase requirements use valid phase enums.
          <Function test_phase_weights_keys_are_phases>
            Test that phase weights use valid phase enums.
          <Function test_default_models_keys_are_topics>
            Test that default models use valid topic enums.
      <Module test_exceptions.py>
        Unit tests for custom exceptions.
        <Class TestConversationNotFoundError>
          Test ConversationNotFoundError exception.
          <Function test_exception_message>
            Test exception message formatting.
          <Function test_exception_can_be_raised>
            Test that exception can be raised and caught.
          <Function test_exception_inherits_from_exception>
            Test that custom exception inherits from Exception.
        <Class TestConversationNotFoundCompatError>
          Test ConversationNotFoundCompatError exception.
          <Function test_compat_exception_message>
            Test compat exception message formatting.
          <Function test_compat_exception_can_be_raised>
            Test that compat exception can be raised.
        <Class TestInvalidTopicError>
          Test InvalidTopicError exception.
          <Function test_invalid_topic_error_message>
            Test invalid topic error message.
          <Function test_invalid_topic_error_can_be_raised>
            Test that invalid topic error can be raised.
        <Class TestExceptionHierarchy>
          Test exception hierarchy and relationships.
          <Function test_all_exceptions_inherit_from_exception>
            Test that all custom exceptions inherit from Exception.
          <Function test_exceptions_can_be_caught_as_exception>
            Test that custom exceptions can be caught as generic Exception.
      <Module test_model_pricing.py>
        Unit tests for model pricing calculations.
        <Class TestGetModelPricing>
          Test get_model_pricing function.
          <Function test_get_pricing_for_existing_model>
            Test getting pricing for a known model.
          <Function test_get_pricing_for_sonnet_model>
            Test pricing for Claude Sonnet model.
          <Function test_get_pricing_for_unknown_model_returns_zero>
            Test that unknown models return zero pricing.
        <Class TestCalculateCost>
          Test calculate_cost function.
          <Function test_calculate_cost_with_haiku>
            Test cost calculation for Haiku model.
          <Function test_calculate_cost_with_sonnet>
            Test cost calculation for Sonnet model.
          <Function test_calculate_cost_with_opus>
            Test cost calculation for Opus model (most expensive).
          <Function test_calculate_cost_with_zero_tokens>
            Test cost calculation with zero tokens.
          <Function test_calculate_cost_with_unknown_model_returns_zero>
            Test that cost is zero for unknown models.
          <Function test_cost_rounding_precision>
            Test that cost is rounded to 6 decimal places.
        <Class TestGetAvailableModels>
          Test get_available_models function.
          <Function test_get_available_models_returns_list>
            Test that available models returns a list.
          <Function test_get_available_models_contains_expected_models>
            Test that available models includes expected model IDs.
          <Function test_available_models_count>
            Test that we have pricing for expected number of models.
        <Class TestGetModelInfo>
          Test get_model_info function.
          <Function test_get_info_for_existing_model>
            Test getting detailed info for existing model.
          <Function test_get_info_includes_pricing_formats>
            Test that model info includes both 1K and 1M pricing.
          <Function test_get_info_for_unknown_model_returns_none>
            Test that unknown models return None.
        <Class TestModelPricingIntegration>
          Integration tests for model pricing.
          <Function test_cost_calculation_matches_expected_real_world_usage>
            Test realistic token usage scenario.
          <Function test_high_volume_cost_calculation>
            Test cost for high-volume usage.
      <Module test_models.py>
        Unit tests for data models.
        <Class TestConversationModels>
          Test conversation model classes.
          <Function test_message_creation>
            Test Message model creation.
          <Function test_conversation_context_creation>
            Test ConversationContext model creation.
          <Function test_coaching_session_creation>
            Test Conversation model creation.
          <Function test_conversation_add_message>
            Test adding messages to conversation.
          <Function test_conversation_progress_calculation>
            Test conversation progress calculation.
          <Function test_conversation_status_changes>
            Test conversation status management.
        <Class TestRequestModels>
          Test request model classes.
          <Function test_initiate_conversation_request>
            Test InitiateConversationRequest validation.
          <Function test_initiate_conversation_request_validation>
            Test request validation.
          <Function test_message_request>
            Test MessageRequest validation.
          <Function test_message_request_validation>
            Test message request validation.
        <Class TestResponseModels>
          Test response model classes.
          <Function test_conversation_response>
            Test ConversationResponse model.
          <Function test_message_response>
            Test MessageResponse model.
      <Module test_onboarding_models.py>
        Unit tests for Onboarding Pydantic models (Issue #48).
        <Class TestOnboardingSuggestionRequest>
          Test OnboardingSuggestionRequest model.
          <Function test_valid_request_with_all_fields>
            Test valid request with all fields.
          <Function test_valid_request_minimal_fields>
            Test valid request with only required fields.
          <Function test_valid_kinds>
            Test all valid kind values.
          <Function test_invalid_kind_raises_error>
            Test that invalid kind raises validation error.
          <Function test_empty_context>
            Test with empty context dictionary.
          <Function test_context_with_list_values>
            Test context with list values (products).
        <Class TestOnboardingSuggestionResponse>
          Test OnboardingSuggestionResponse model.
          <Function test_valid_response>
            Test valid suggestion response.
          <Function test_empty_suggestions_list>
            Test response with empty suggestions list.
          <Function test_single_suggestion>
            Test response with single suggestion.
          <Function test_long_reasoning>
            Test response with long reasoning text.
        <Class TestWebsiteScanRequest>
          Test WebsiteScanRequest model.
          <Function test_valid_https_url>
            Test valid HTTPS URL.
          <Function test_valid_http_url>
            Test valid HTTP URL.
          <Function test_url_with_path>
            Test URL with path.
          <Function test_url_with_query_params>
            Test URL with query parameters.
          <Function test_invalid_url_without_protocol>
            Test that URL without http:// or https:// fails validation.
          <Function test_invalid_url_with_ftp>
            Test that ftp:// URLs fail validation.
          <Function test_empty_url_raises_error>
            Test that empty URL raises validation error.
        <Class TestWebsiteScanResponse>
          Test WebsiteScanResponse model.
          <Function test_valid_response_with_all_fields>
            Test valid response with all fields.
          <Function test_camel_case_aliases>
            Test that camelCase aliases work.
          <Function test_snake_case_field_names>
            Test that snake_case field names work.
          <Function test_empty_products_list>
            Test response with empty products list.
          <Function test_many_products>
            Test response with many products.
        <Class TestOnboardingCoachingRequest>
          Test OnboardingCoachingRequest model.
          <Function test_valid_request_with_all_fields>
            Test valid coaching request.
          <Function test_valid_topics>
            Test all valid topic values.
          <Function test_invalid_topic_raises_error>
            Test that invalid topic raises validation error.
          <Function test_empty_message_raises_error>
            Test that empty message raises validation error.
          <Function test_minimal_request>
            Test request with minimal fields.
          <Function test_long_message>
            Test request with very long message.
        <Class TestOnboardingCoachingResponse>
          Test OnboardingCoachingResponse model.
          <Function test_valid_response_with_all_fields>
            Test valid coaching response.
          <Function test_response_with_no_suggestions>
            Test response with empty suggestions list.
          <Function test_minimal_response>
            Test response with minimal fields.
          <Function test_long_response_text>
            Test response with very long response text.
          <Function test_many_suggestions>
            Test response with many suggestions.
        <Class TestOnboardingModelsEdgeCases>
          Test edge cases across all models.
          <Function test_suggestion_request_with_none_current>
            Test SuggestionRequest explicitly None current.
          <Function test_scan_response_with_special_characters>
            Test WebsiteScanResponse with special characters.
          <Function test_coaching_request_with_multiline_message>
            Test CoachingRequest with multiline message.
          <Function test_model_serialization>
            Test that models can be serialized to dict.
          <Function test_model_json_serialization>
            Test that models can be serialized to JSON.
      <Module test_response_models.py>
        Unit tests for response models.
        <Class TestConversationResponse>
          Test ConversationResponse model.
          <Function test_valid_conversation_response>
            Test creating valid conversation response.
          <Function test_conversation_response_with_metadata>
            Test conversation response with optional metadata.
        <Class TestMessageResponse>
          Test MessageResponse model.
          <Function test_valid_message_response>
            Test creating valid message response.
          <Function test_message_response_minimal>
            Test message response with minimal fields.
          <Function test_message_response_completed>
            Test message response for completed conversation.
        <Class TestConversationSummary>
          Test ConversationSummary model.
          <Function test_valid_conversation_summary>
            Test creating valid conversation summary.
          <Function test_conversation_summary_with_different_statuses>
            Test summaries with different statuses.
        <Class TestConversationListResponse>
          Test ConversationListResponse model.
          <Function test_valid_list_response>
            Test creating valid list response.
          <Function test_empty_list_response>
            Test list response with no conversations.
          <Function test_list_response_pagination>
            Test list response with different pagination.

=================================== ERRORS ====================================
______ ERROR collecting tests/unit/repositories/test_topic_repository.py ______
ImportError while importing test module 'C:\Projects\XBS\PurposePath\PurposePath_Api\pp_ai\coaching\tests\unit\repositories\test_topic_repository.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
C:\Python313\Lib\importlib\__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
coaching\tests\unit\repositories\test_topic_repository.py:16: in <module>
    from coaching.src.repositories.topic_repository import TopicRepository
coaching\src\repositories\topic_repository.py:9: in <module>
    from boto3.dynamodb.conditions import Attr, Key
E   ModuleNotFoundError: No module named 'boto3'
_______ ERROR collecting tests/unit/services/test_s3_prompt_storage.py ________
ImportError while importing test module 'C:\Projects\XBS\PurposePath\PurposePath_Api\pp_ai\coaching\tests\unit\services\test_s3_prompt_storage.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
C:\Python313\Lib\importlib\__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
coaching\tests\unit\services\test_s3_prompt_storage.py:6: in <module>
    from botocore.exceptions import ClientError
E   ModuleNotFoundError: No module named 'botocore'
____________ ERROR collecting tests/unit/test_insights_service.py _____________
ImportError while importing test module 'C:\Projects\XBS\PurposePath\PurposePath_Api\pp_ai\coaching\tests\unit\test_insights_service.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
C:\Python313\Lib\importlib\__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
coaching\tests\unit\test_insights_service.py:6: in <module>
    from coaching.src.services.insights_service import InsightsService
coaching\src\services\insights_service.py:13: in <module>
    from src.infrastructure.repositories.dynamodb_conversation_repository import (
coaching\src\infrastructure\repositories\__init__.py:6: in <module>
    from src.infrastructure.repositories.dynamodb_conversation_repository import (
coaching\src\infrastructure\repositories\dynamodb_conversation_repository.py:11: in <module>
    from boto3.dynamodb.conditions import Attr, Key
E   ModuleNotFoundError: No module named 'boto3'
___________ ERROR collecting tests/unit/test_onboarding_service.py ____________
ImportError while importing test module 'C:\Projects\XBS\PurposePath\PurposePath_Api\pp_ai\coaching\tests\unit\test_onboarding_service.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
C:\Python313\Lib\importlib\__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
coaching\tests\unit\test_onboarding_service.py:6: in <module>
    from coaching.src.services.onboarding_service import OnboardingService
coaching\src\services\onboarding_service.py:5: in <module>
    from src.services.llm_service import LLMService
coaching\src\services\llm_service.py:11: in <module>
    from src.llm.providers.manager import ProviderManager
coaching\src\llm\__init__.py:11: in <module>
    from .orchestrator import LLMOrchestrator
coaching\src\llm\orchestrator.py:16: in <module>
    from src.llm.providers.base import LLMProvider
coaching\src\llm\providers\__init__.py:15: in <module>
    from .anthropic import AnthropicProvider
coaching\src\llm\providers\anthropic.py:10: in <module>
    from langchain_anthropic import ChatAnthropic
E   ModuleNotFoundError: No module named 'langchain_anthropic'
_____ ERROR collecting tests/unit/workflows/test_refactored_workflows.py ______
ImportError while importing test module 'C:\Projects\XBS\PurposePath\PurposePath_Api\pp_ai\coaching\tests\unit\workflows\test_refactored_workflows.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
C:\Python313\Lib\importlib\__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
coaching\tests\unit\workflows\test_refactored_workflows.py:20: in <module>
    from coaching.src.workflows.analysis_workflow import (
coaching\src\workflows\__init__.py:11: in <module>
    from .analysis_workflow import AnalysisWorkflow
coaching\src\workflows\analysis_workflow.py:14: in <module>
    from langgraph.graph import StateGraph
E   ModuleNotFoundError: No module named 'langgraph.graph'
============================== warnings summary ===============================
..\..\..\..\..\Users\motty\AppData\Roaming\Python\Python313\site-packages\pydantic\_internal\_config.py:323
..\..\..\..\..\Users\motty\AppData\Roaming\Python\Python313\site-packages\pydantic\_internal\_config.py:323
  C:\Users\motty\AppData\Roaming\Python\Python313\site-packages\pydantic\_internal\_config.py:323: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)

..\..\..\..\..\Users\motty\AppData\Roaming\Python\Python313\site-packages\pydantic\_internal\_generate_schema.py:298
..\..\..\..\..\Users\motty\AppData\Roaming\Python\Python313\site-packages\pydantic\_internal\_generate_schema.py:298
..\..\..\..\..\Users\motty\AppData\Roaming\Python\Python313\site-packages\pydantic\_internal\_generate_schema.py:298
..\..\..\..\..\Users\motty\AppData\Roaming\Python\Python313\site-packages\pydantic\_internal\_generate_schema.py:298
..\..\..\..\..\Users\motty\AppData\Roaming\Python\Python313\site-packages\pydantic\_internal\_generate_schema.py:298
..\..\..\..\..\Users\motty\AppData\Roaming\Python\Python313\site-packages\pydantic\_internal\_generate_schema.py:298
  C:\Users\motty\AppData\Roaming\Python\Python313\site-packages\pydantic\_internal\_generate_schema.py:298: PydanticDeprecatedSince20: `json_encoders` is deprecated. See https://docs.pydantic.dev/2.11/concepts/serialization/#custom-serializers for alternatives. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.11/migration/
    warnings.warn(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
ERROR coaching\tests\unit\repositories\test_topic_repository.py
ERROR coaching\tests\unit\services\test_s3_prompt_storage.py
ERROR coaching\tests\unit\test_insights_service.py
ERROR coaching\tests\unit\test_onboarding_service.py
ERROR coaching\tests\unit\workflows\test_refactored_workflows.py
!!!!!!!!!!!!!!!!!!! Interrupted: 5 errors during collection !!!!!!!!!!!!!!!!!!!
=================== 567 tests collected, 5 errors in 3.11s ====================
