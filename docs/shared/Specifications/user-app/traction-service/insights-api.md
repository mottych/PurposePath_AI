# Coaching Insights API

**Service:** Traction Service (.NET)  
**Controller:** InsightsController  
**Version:** v1.0  
**Last Updated:** February 4, 2026

## Overview

The Coaching Insights API manages AI-generated coaching insights and recommendations. Insights are generated by the Python Coaching Service and persisted in the Traction Service for retrieval and management.

**Architecture Flow:**
1. Frontend calls Python Coaching Service `POST /insights/generate` (documented in [coaching-service.md](../coaching-service.md))
2. Python AI returns insights with snake_case properties (kiss_category, alignment_impact, etc.)
3. Frontend persists to Traction Service `POST /traction/api/v1/insights/batch` (snake_case accepted via JsonPropertyName)
4. C# API returns camelCase properties (kissCategory, alignmentImpact, etc.) - standard .NET convention
5. Widget retrieves via dashboard endpoint (documented in [dashboard-service.md](../dashboard-service.md#ai-insights-widget))

---

## Table of Contents

- [Save Coaching Insights Batch](#save-coaching-insights-batch)
- [Get All Coaching Insights](#get-all-coaching-insights)
- [Get Coaching Insight by ID](#get-coaching-insight-by-id)
- [Update Coaching Insight](#update-coaching-insight)
- [Delete Coaching Insight](#delete-coaching-insight)

---

## Save Coaching Insights Batch

**POST** `/traction/api/v1/insights/batch`

Save multiple coaching insights after generation from Python AI service.

### Request Body

```json
{
  "insights": [
    {
      "title": "Focus on Enterprise Segment",
      "description": "Analysis shows 40% higher conversion rates in enterprise segment.",
      "category": "strategy",
      "priority": "high",
      "kissCategory": "start",
      "alignmentImpact": "This insight directly supports our growth objectives.",
      "status": "active",
      "businessImpact": "high",
      "effortRequired": "medium",
      "createdAt": "2026-02-02T23:09:51.327Z"
    }
  ]
}
```

### Request Field Definitions

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `insights` | array | Yes | Array of coaching insight objects |
| `insights[].title` | string | Yes | Short, actionable title |
| `insights[].description` | string | Yes | Detailed explanation |
| `insights[].category` | string | Yes | "strategy", "operations", "finance", "marketing", "leadership", "technology" |
| `insights[].priority` | string | Yes | "low", "medium", "high", "critical" |
| `insights[].kissCategory` | string | Yes | "keep", "improve", "start", "stop" |
| `insights[].alignmentImpact` | string | No | How this relates to business purpose/values |
| `insights[].status` | string | No | Defaults to "active" |
| `insights[].businessImpact` | string | No | "low", "medium", "high" |
| `insights[].effortRequired` | string | No | "low", "medium", "high" |

### Response

```json
{
  "success": true,
  "data": {
    "savedCount": 1,
    "insights": [
      {
        "id": "5caa3a0c-2751-4326-b5db-f13b945fdc53",
        "tenantId": "dfee9135-361e-41b5-87ba-99e92f143666",
        "title": "Focus on Enterprise Segment",
        "description": "Analysis shows 40% higher conversion rates...",
        "category": "strategy",
        "priority": "high",
        "kissCategory": "start",
        "alignmentImpact": "This insight directly supports our growth objectives.",
        "status": "active",
        "businessImpact": "high",
        "effortRequired": "medium",
        "createdAt": "2026-02-04T02:51:52.836Z",
        "updatedAt": "2026-02-04T02:51:52.836Z"
      }
    ]
  },
  "error": null
}
```

**Notes:**
- **Input/Output**: Uses standard camelCase for all properties (consistent with all other API endpoints)
- Backend auto-generates GUID `id` if not provided
- Backend auto-generates timestamps if not provided

---

## Get All Coaching Insights

**GET** `/traction/api/v1/insights`

Retrieve all insights for authenticated tenant.

### Response

```json
{
  "success": true,
  "data": [
    {
      "id": "5caa3a0c-2751-4326-b5db-f13b945fdc53",
      "tenantId": "dfee9135-361e-41b5-87ba-99e92f143666",
      "title": "Focus on Enterprise Segment",
      "description": "Analysis shows 40% higher conversion rates...",
      "category": "strategy",
      "priority": "high",
      "kissCategory": "start",
      "alignmentImpact": "This insight directly supports our growth objectives.",
      "status": "active",
      "businessImpact": "high",
      "effortRequired": "medium",
      "createdAt": "2026-02-04T02:51:52.836Z",
      "updatedAt": "2026-02-04T02:51:52.836Z"
    }
  ],
  "error": null
}
```

---

## Get Coaching Insight by ID

**GET** `/traction/api/v1/insights/{id}`

Retrieve specific insight by ID.

### Response

```json
{
  "success": true,
  "data": {
    "id": "5caa3a0c-2751-4326-b5db-f13b945fdc53",
    "tenantId": "dfee9135-361e-41b5-87ba-99e92f143666",
    "title": "Focus on Enterprise Segment",
    "description": "Analysis shows 40% higher conversion rates...",
    "category": "strategy",
    "priority": "high",
    "kissCategory": "start",
    "alignmentImpact": "This insight directly supports our growth objectives.",
    "status": "active",
    "businessImpact": "high",
    "effortRequired": "medium",
    "createdAt": "2026-02-04T02:51:52.836Z",
    "updatedAt": "2026-02-04T02:51:52.836Z"
  },
  "error": null
}
```

---

## Update Coaching Insight

**PUT** `/traction/api/v1/insights/{id}`

Update existing insight (partial updates supported).

### Request Body

```json
{
  "title": "Updated Title",
  "description": "Updated description",
  "priority": "critical",
  "status": "in_progress"
}
```

### Response

```json
{
  "success": true,
  "data": {
    "id": "5caa3a0c-2751-4326-b5db-f13b945fdc53",
    "tenantId": "dfee9135-361e-41b5-87ba-99e92f143666",
    "title": "Updated Title",
    "description": "Updated description",
    "category": "strategy",
    "priority": "critical",
    "kissCategory": "start",
    "alignmentImpact": "This insight directly supports our growth objectives.",
    "status": "in_progress",
    "businessImpact": "high",
    "effortRequired": "medium",
    "createdAt": "2026-02-04T02:51:52.836Z",
    "updatedAt": "2026-02-04T10:15:22.123Z"
  },
  "error": null
}
```

**Notes:**
- Only provided fields updated
- `kissCategory`, `category`, `alignmentImpact`, `businessImpact`, `effortRequired` not updatable (set at creation)

---

## Delete Coaching Insight

**DELETE** `/traction/api/v1/insights/{id}`

Permanently delete insight.

### Response

```json
{
  "success": true,
  "data": null,
  "error": null
}
```

---

## Frontend Integration

**Service:** `src/services/api.ts`

```typescript
// Save insights from Python AI (snake_case input)
await saveCoachingInsights({ insights: pythonAiResponse });

// Retrieve insights (camelCase output)
const insights = await getCoachingInsights();

// Update insight status
await updateCoachingInsight(id, { status: 'completed' });
```

**Related:**
- [Python AI Service](../../ai-user/backend-integration-unified-ai.md) - Generates insights
- [Dashboard Widget](../dashboard-service.md#ai-insights-widget) - Displays insights
